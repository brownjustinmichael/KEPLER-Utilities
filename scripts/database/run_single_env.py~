#!/usr/bin/env python

import os
import random
import math
import numpy as np
import astropy.units as u

import kepler_utils
import kepler_utils.jobs.generate as generate
import kepler_utils.jobs.kepler_jobs as kepler_jobs

generator = os.path.join(os.path.dirname(os.path.realpath(kepler_utils.__file__)), "jobs/generator/s15envg")

command = "/Users/justinbrown/Codes/kepler/gfortran/keplery"
run_location = "/Users/justinbrown/Dropbox/Research/Stan/kepler/env"

l = 10. ** 38.3
mc = 10. ** 33.90 * u.g
m = 14 * u.solMass
r = 10. ** 9.38
n = 0
name = "s15ea%03d" % 18

kepler_jobs.run.apply_async ([name, generator, run_location, command], kwargs = {'force': False, 'query': True, 'p izonezms': 0, 'p q1faczms': 1000.0, 'p nstop': 3000, 'p radius0': r, 'p xlum0': l, 'p summ0': mc.to (u.g).value, 'p timezms': 1.0e-5, 'p tstop': 3.15e13, 'p ipup': 0, 'rescalem': str ((m - mc).to (u.solMass).value) + " mult", 'alias zams': "\"link \'%s\'\"" % (str (n) + "comp"), 'tags': ["Envelope", "NGrad = " + str (n), "Test"], "query": True, "goal": "final"}, queue = 'priority')
